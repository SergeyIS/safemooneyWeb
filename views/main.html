<!doctype html>
<html class="uk-background-muted" ng-app="mainApp" style="background-color: rgb(240, 240, 240)">
    <head>
        <title></title>
        <link rel="stylesheet" href="../css/uikit.min.css" />
        <link rel="stylesheet" href="../css/styles.css"/>
        <script src="../lib/jquery.js"></script>
        <script src="../lib/uikit.min.js"></script>
        <script src="../lib/uikit-icons.min.js"></script>
        <script src="../lib/jquery.tmpl.min.js"></script>
        <script src="../lib/angular.min.js"></script>
        <script src="../app/dataheap.js"></script>
        <script src="../app/app.js"></script>
        <script src="../controllers/mainController.js"></script>

        <script>
            (function(Function_prototype) {
                Function_prototype.debounce = function(delay, ctx) {
                    var fn = this, timer;
                    return function() {
                        var args = arguments, that = this;
                        clearTimeout(timer);
                        timer = setTimeout(function() {
                            fn.apply(ctx || that, args);
                        }, delay);
                        $("#loader").removeClass("hide");
                    };
                };
            })(Function.prototype);
            window.addEventListener('DOMContentLoaded', function() {
            var input = document.querySelector('#srcPanel');
            function test() {
                var auth = {userId: localStorage.getItem("userId"), token: localStorage.getItem("token")};
                dataheap.search(input.value, auth);
                $("#loader").addClass("hide");
                setTimeout(function(){
                    dataheap.cleanSrc();
                }, 10000);
            }
            input.addEventListener('input', test.debounce(500));
            });
            
        </script>
        
        <style>
            .hide{
                display: none;
            }
        </style>
    </head>
    <body ng-controller="mainController">
        <div class="uk-navbar-container tm-navbar-container" style="top: 0px; background-color: white;">
            <div class="uk-container uk-container-expand">
                <nav class="uk-navbar">
                    <div class="uk-navbar-left">
                        <a href="../" class="uk-navbar-item uk-logo">
                            <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="38" height="44" viewBox="0 0 512 512">
                                <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#555555" stroke="none">
                                    <path d="M1715 5029 c-214 -14 -347 -30 -526 -65 -441 -86 -742 -212 -931
                                    -392 -115 -109 -158 -206 -158 -352 0 -95 0 -96 32 -127 190 -178 676 -331
                                    1258 -397 500 -57 1121 -44 1606 34 448 72 844 216 1002 363 32 31 32 32 32
                                    127 0 147 -43 243 -158 353 -312 297 -1000 471 -1837 466 -110 -1 -254 -5
                                    -320 -10z"/>
                                    <path d="M100 3441 l0 -380 43 -34 c172 -141 477 -255 903 -336 135 -26 405
                                    -64 410 -58 1 1 14 26 28 55 128 254 403 552 643 697 l53 32 -287 6 c-159 4
                                    -353 13 -433 21 -537 54 -993 173 -1261 326 -48 28 -89 50 -93 50 -3 0 -6
                                    -171 -6 -379z"/>
                                    <path d="M3932 3771 c-46 -27 -133 -68 -193 -92 l-109 -42 115 -34 c64 -18
                                    150 -49 192 -68 42 -19 80 -35 84 -35 5 0 9 72 9 160 0 88 -3 160 -7 160 -5 0
                                    -46 -22 -91 -49z"/>
                                    <path d="M3080 3534 c-19 -2 -78 -9 -130 -15 -412 -47 -831 -268 -1108 -582
                                    -473 -537 -540 -1304 -168 -1905 454 -732 1409 -1028 2220 -688 896 376 1298
                                    1369 895 2212 -242 508 -745 872 -1323 959 -102 15 -325 26 -386 19z m220
                                    -708 l5 -88 73 -19 c155 -39 269 -131 337 -273 19 -40 35 -78 35 -83 0 -9 -58
                                    -34 -227 -99 l-62 -24 -37 71 c-57 108 -129 159 -224 159 -120 0 -206 -94
                                    -186 -203 13 -72 58 -101 293 -188 286 -107 392 -180 456 -316 27 -58 32 -82
                                    35 -164 2 -52 -1 -121 -8 -152 -38 -187 -195 -331 -407 -374 l-82 -17 -3 -116
                                    -3 -115 -105 0 -105 0 -3 116 -3 116 -67 12 c-107 19 -219 79 -287 153 -60 65
                                    -127 188 -140 259 l-7 35 146 37 c180 46 182 46 191 5 10 -46 42 -108 74 -141
                                    43 -47 98 -70 181 -75 163 -9 250 55 250 185 0 99 -43 130 -300 222 -282 101
                                    -369 160 -437 299 -35 69 -38 83 -41 178 -5 126 17 210 79 303 69 103 172 170
                                    300 194 l59 12 0 86 c0 47 3 89 7 93 4 4 52 5 107 4 l101 -3 5 -89z"/>
                                    <path d="M100 2381 l0 -379 52 -46 c122 -107 434 -232 748 -301 158 -34 387
                                    -71 395 -63 3 3 1 38 -5 79 -27 211 -3 474 66 700 4 14 -12 18 -103 28 -119
                                    13 -395 67 -543 106 -194 51 -408 137 -534 213 -37 23 -70 42 -72 42 -2 0 -4
                                    -171 -4 -379z"/>
                                    <path d="M100 1367 c0 -304 2 -339 19 -390 76 -221 383 -416 841 -536 298 -78
                                    616 -119 990 -127 l235 -6 -48 32 c-236 153 -450 367 -587 590 -58 94 -137
                                    257 -164 337 l-17 51 -52 7 c-495 65 -890 182 -1145 337 -34 21 -65 38 -67 38
                                    -3 0 -5 -150 -5 -333z"/>
                                </g>
                            </svg> 
                            <div class="uk-margin-small-left">
                                <p style="margin: 0; padding: 0">SafeMooney</p>
                                <p class="uk-text-meta" style="margin:0; padding: 0">The easiest way to manage your debts</p>
                            </div>
                            
                        </a>
                    </div>
                    <div class="uk-navbar-right">
                        <ul class="uk-navbar-nav">
                            <li><a href="#">Notifications</a></li>
                            <li><a href="#">Settings</a></li>
                            <li><a href="#" ng-mousedown="logOut()">LogOut</a></li>
                            <li>
                                <a class="uk-float-right">Language</a>
                                <div uk-dropdown="pos: bottom-justify">
                                    <ul class="uk-nav uk-dropdown-nav">
                                        <li class="uk-active">English</li>
                                        <li><a href="#">中國</a></li>
                                        <li><a href="#">Español</a></li>
                                        <li><a href="#">Russian</a></li>
                                        <li><a href="#">Français</a></li>
                                        <li><a href="#">Deutsche</a></li>   
                                    </ul>
                                </div>
                            </li>
                        </ul>
                </nav>
            </div>
        </div>

        <div class="uk-text-center" uk-grid style="padding: 50px 10px;">
            <div class="uk-width-1-3" >
                <form class="uk-search uk-search-default uk-width-1 uk-card uk-card-default uk-card-hover">
                    <span uk-search-icon></span>
                    <input id="srcPanel" class="uk-search-input" type="search" placeholder="Search..." style="height: 40px;">
                </form>
                <div id="loader" class="uk-width-auto hide">
                    <img class="uk-border-circle" width="40" height="40" src="../res/loader.gif">
                </div>
                <div id="usrContainer" bind-connect="searchData" style="margin-top: 30px;"></div>
            </div>
            
            <div class="uk-width-1-3" >
                <div class="uk-card uk-card-default uk-text-meta uk-card-hover" title="The total amount of money being transferred into and out from your friends" uk-tooltip style="height: 40px; padding: 10px 20px"><span uk-icon="icon: list" style="margin-right: 20px"></span>Сash flows</div>
                <div uk-sortable="handle: .uk-card" bind-connect="transactData" style="margin-top: 30px;"></div>
            </div>
            <div class="uk-width-1-3">
                <div class="uk-card uk-card-default uk-text-meta uk-card-hover" title="Informing that someone wants to lend you money" uk-tooltip style="height: 40px; padding: 10px 20px"><span uk-icon="icon: heart" style="margin-right: 20px"></span>Notifications</div>
                <div uk-sortable="handle: .uk-card" bind-connect="notifyData" style="margin-top: 30px;"></div>
            </div>
        </div>

        <!---->
        <script id="usrTmpl", type="text/x-jquery-tmpl">
            <div class="uk-grid-small uk-flex-middle" uk-grid>
                <div class="" style="width: 50px; padding: 2px; margin-top: 0">
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: chevron-right" style="padding: 2px;"></div>
                        </div>
                    </div>
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: ban" style="padding: 2px; margin: 5% 0;"></div>
                        </div>
                    </div>
                </div>
                <div class="uk-width-expand" style="padding: 0">
                <div class="uk-card uk-card-default">
                <div class="uk-card-header" style="padding: 5px 20px">
                    <div class="uk-grid-small uk-flex-middle" uk-grid>
                        <div class="uk-width-expand">
                            <div style="text-align:justify">
                                <h4 class="uk-text-small" style="display: inline; margin-left: auto;">${FirstName} ${LastName}</h4>
                            </div>          
                            <div style="text-align:justify">
                                <p class="uk-text-meta uk-margin-remove-top uk-text-left" style="display: inline;">@${Username}</p>
                            </div>          
                            
                        </div>
                        <div class="uk-width-auto">
                            <img class="uk-border-circle" width="40" height="40" src="../res/loader.gif">
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </script>

        <script id="trlTmp", type="text/x-jquery-tmpl">
            <div class="uk-margin-small-bottom" uk-grid>
                <div class="uk-width-expand"> 
                    <div class="uk-card uk-card-default">
                        <div class="uk-card-header" style="padding: 5px 20px">
                            <div class="uk-grid-small uk-flex-middle" uk-grid>
                                <div class="uk-width-expand">  
                                    <div style="text-align:justify">
                                        <div>
                                            
                                        </div>
                                        <h4 class="uk-card-title" style="display: inline; margin-left: auto;">${firstname} ${lastname}</h4>
                                        <span class="uk-label uk-label-success" style="display: inline; margin: auto 10px;">${count}</span>
                                    </div>
                                    <div style="text-align:justify">
                                        <p class="uk-text-meta uk-margin-remove-top uk-text-left" style="display: inline;"><time datetime="2016-04-01T19:00">${date}</time></p>
                                        <span class="uk-margin-small-right" style="display: inline; float: right">details</span>
                                    </div>          
                                    
                                </div>
                                <div class="uk-width-auto">
                                    <img class="uk-border-circle" width="40" height="40" src="../res/loader.gif">
                                </div>
                            </div>
                        </div>
                        <div class="uk-card-body uk-text-small uk-text-meta">
                            <p>${comment}
                                Раздел машинного обучения, с одной стороны, образовался в результате разделения науки о нейросетях на методы обучения сетей и виды топологий их архитектуры, с другой стороны - вобрал в себя методы математической статистики.
                            </p>
                        </div>
                    </div>
                </div>
                <div style="width: 50px; margin-left: 5px; padding: 2px;" >
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: check" style="padding: 2px; height: 33%"></div>
                        </div>
                    </div>
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: close" style="padding: 2px; height: 33%; margin: 10% 0;"></div>
                        </div>
                    </div>
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: chevron-right" style="padding: 2px; height: 30%"></div>
                        </div>
                    </div>    
                </div>
            </div>
        </script>

        <script id="ntfTmpl", type="text/x-jquery-tmpl">
            <div class="uk-grid-small uk-flex-middle" uk-grid>
                <div style="width: 50px; padding: 2px;" >
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: check" style="padding: 2px; height: 33%"></div>
                        </div>
                    </div>
                    <div class="uk-animation-toggle" >
                        <div class="uk-animation-scale-down">
                            <div class="uk-card uk-card-default"  uk-icon="icon: close" style="padding: 2px; height: 33%; margin: 5% 0;"></div>
                        </div>
                    </div>
                </div>

                <div class="uk-card uk-card-default uk-width-expand">  
                    <div style="text-align:justify">
                        <h4 class="uk-text-small" style="display: inline; margin-left: auto;">${firstname} ${lastname}</h4>
                        <span class="uk-label uk-label-success" style="display: inline; margin: auto 10px;">${count}</span>
                    </div>          
                    <div style="text-align:justify">
                        <p class="uk-text-meta uk-margin-remove-top uk-text-left" style="display: inline;"><time datetime="2016-04-01T19:00">${date}</time></p>
                    </div>          
                </div>
            </div>
        </script>
        <!---->
    </body>
</html>